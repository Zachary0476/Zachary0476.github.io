<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>基于sleep函数的红绿灯功能</title>
      <link href="/2023/05/21/%E5%9F%BA%E4%BA%8Esleep%E5%87%BD%E6%95%B0%E7%9A%84%E7%BA%A2%E7%BB%BF%E7%81%AF%E5%8A%9F%E8%83%BD/"/>
      <url>/2023/05/21/%E5%9F%BA%E4%BA%8Esleep%E5%87%BD%E6%95%B0%E7%9A%84%E7%BA%A2%E7%BB%BF%E7%81%AF%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 手写红灯 2s红灯 1s黄灯 3s绿灯</span></span><br><span class="line"><span class="comment">// 1.采用setTimeout嵌套；</span></span><br><span class="line"><span class="comment">// 2.如下方式promise + async/await</span></span><br><span class="line"><span class="comment">// 3.generater函数方式</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">sleep</span> = (<span class="params">t</span>) =&gt; <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, t))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">start</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">sleep</span>( <span class="number">2</span>* <span class="number">1000</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">sleep</span>( <span class="number">1</span>* <span class="number">1000</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;yellow&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">sleep</span>( <span class="number">3</span>* <span class="number">1000</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;green&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">start</span>()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
